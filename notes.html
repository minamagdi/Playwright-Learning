<!--  1 -->
<!-- /* use this command to generate code using playwright codegen
    npx playwright codegen -o tests/heroKuApp.ts 
    will create a file named heroKuApp.ts inside tests folder
*/ -->


<!--  2
/* use this command to run test using its title
    npx playwright test -g "test codegen example"
    will run the test with the title "test codegen example"

    to run a specific test file
    npx playwright test api --workers=1
*/

<!--  3
/**
 * trace => useful for debugging failed tests
 * it will record a trace for each test, when the test fails, you can open the trace file in the trace viewer and see what went wrong
 * you can enable trace in 2 ways
 * from config file trace: 'on-first-retry'
 * from command line npx playwright test --trace on-first-retry
 *
 * to open trace viewer use this command
 * npx playwright show-trace trace.zip
 * 
 * to open report use this command
 * npx playwright show-report
 *
 * to run tests using tag
    * npx playwright test specFilename --grep "@smoke"
 */ -->

<!--  4
/* locators
    - getByRole         => button, link, checkbox, textbox, heading, etc
    - getByLabel        => input fields associated with a label or aria-label attribute
    - getByPlaceholder  => input fields with a placeholder attribute
    - getByText 
    - getByAltText
    - getByTitle
    - getByTestId        => data-testid attribute
    - locator(css selector)
        - [attribute='value']
        - tagname[attribute='value']
        - [attribute^='value'] (starts with)
        - [attribute$='value'] (ends with)
        - [attribute*='value'] (contains)
        - [attribute1='value'][attribute2='value'] (and)
        - [attribute1='value'], [attribute2='value'] (or)
        - [attribute='value'] > div (child) direct child
        - [attribute='value'] div:nth-child(n) (nth child)
        - page.locator([attribute='value'] div).nth(n) (nth child)
        - page.locator([attribute='value'] div).first() (first child)
        - [attribute='value'] div (descendant) any level of child
    - locator(xpath)
        - //tagname[@attribute='value']
        - //*[@attribute='value']
        - //tagname[contains(@attribute,'value')]
        - //tagname[text()='value']
        - //*[text()='value']
        - (//tagname[@attribute='value'])[n] (nth element)
                - (//div[@class="login-box"]/form/div)[1]
        - //tagname[@attribute='value']//tagname (descendant) any level of child
        - //tagname[@attribute='value' and @attribute='value'] (and)
        - //input[@class="submit-button" and @name="login-button"]
        - //tagname[@attribute='value'] or tagname[@attribute='value'] (or)
        - //input[@class="submit-button" or @name="login-button"]
        - (//div[@id="login_button_container"]/div//div/following-sibling::div)[2] (following sibling)
        - (//div[@id="login_button_container"]/div//div/preceding-sibling::div)[1] (preceding sibling)
        - (//div[@id="login_button_container"]/div//div/following-sibling::div)[2]/parent::div (parent)
        - (//div[@id="login_button_container"]/div//div/following-sibling::div)[last()] (last element)
    - locator(id) 
        - #id
    - locator(class)
        - .classname
*/
/>
<!--  5
  promises
    - New tab 
        const [browserTabs] = await Promise.all([
            page.waitForEvent('popup'),
            await page.locator('a[href="/windows/new"]').click()
        ]);
    - New window
        const [newWindow] = await Promise.all([
        page.context().waitForEvent('page'),
        await page.locator('button[onclick="newwindow()"]').click()
        ]);

    - File download
        const download = await Promise.all([
        page.waitForEvent('download'), page.locator('[href="download/image2.jpeg"]').click()
    ])
    - File upload
        const upload = await Promise.all([
        page.waitForEvent('filechooser'), page.locator('#file-upload').click()
    ])

/* 6  Allure Report */
/*
* to add allure report to playwright 
* 1- install 
    - npm i -D allure-commandline
    - npm i -D allure-playwright
* 2- to open the report
    - update playwright.config.ts
        reporter: [['html'], ['allure-playwright']]
    - npx allure generate allure-results --clean -o allure-report
    - npx allure open allure-report

    - to make allure generate report automatically
        - install
        - npm install rimraf mkdirp --save-dev
*/


/*
* 7- to open downloaded allure report in one command from github actions
        1- download allure report as zip artifact
        2- move it new folder
        3- open cmd
            1- install allure globally
                npm i -g allure-playwright
                cd /D filepath (allure folder)
            2- run these commands
                cd /D C:\Users\Asus\OneDrive\Desktop\allure
                npm allure open .  <===== dot means current directory

*/
<!--  8
/* Java installation in Dockerfile
    0- from extensions install docker extension in vs code
    1- get the image with playwright
    from playwright docs get this command and run it in terminal
        docker pull mcr.microsoft.com/playwright:focal  
    2- create a dockerfile in the project root folder
    3- add these lines to dockerfile
        FROM mcr.microsoft.com/playwright:focal
        WORKDIR /appHome
        COPY . .
        RUN apt-get update &&\
            apt-get install -y openjdk-17-jre-headless &&\
            npm install
        ENV JAVA_HOME=/usr/lib/jvm/java-17-openjdk-amd64
        ENV commandToRunTests="npm playwright test"
        CMD ["sh", "-c", "$commandToRunTests"]
    4- build the docker image
        docker build -t docker-playwright .
    5- run the docker image
        docker run --rm docker-playwright\
        or
        docker run --rm -e commandToRunTests="npx playwright test pom" docker-playwright
    6- to run using docker compose
        docker-compose up
        after run tests to close docker
        run this command docker-compose down

        ----------------------------------------------------------
        jenkins setup to run tests
        1- install jenkins in your machine
        2- install java 21 or 17 in your machine
        3- open jenkins in browser localhost:8080
        4- install suggested plugins => ansicolor, html publisher
        5- create new freestyle project
        6- in build section add execute batch command
            npm run test
        7- save and run
        8- on script console add this line to read html report
        System.setProperty("hudson.model.DirectoryBrowserSupport.CSP", "")
        9- click on build now
        10 